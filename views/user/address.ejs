<title>Home | My Addresses</title>

<link
  href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap"
  rel="stylesheet"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/address.css" />

<%- include('../partials/user/header.ejs') %>

<section class="profile-container">
  <div class="profile-grid">
    <!-- LEFT SIDEBAR -->
    <aside class="profile-sidebar">
      <div class="profile-card">
        <img
          src="/uploads/profile/<%= user.profileImage %>"
          alt="User"
          class="profile-avatar"
        />
        <h3><%= user.name%></h3>
        <p><%= user.email%></p>
      </div>

      <ul class="profile-menu">
        <li><a href="/user-profile">Profile</a></li>
        <li><a href="/cart">Cart</a></li>
        <li><a href="/orders">Orders</a></li>
        <li class="active"><a href="/address">Addresses</a></li>
        <li><a href="/wallet">Wallet</a></li>
        <li><a href="/edit-profile">Edit Profile</a></li>
        <li><a href="/change-password">Change Password</a></li>
        <li><a href="/change-email">Change Email</a></li>
        <li class="danger"><a href="/logout">Logout</a></li>
      </ul>
    </aside>

    <!-- MAIN CONTENT -->
    <section class="profile-content">
      <!-- HEADER -->
      <div class="profile-box">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h2>My Addresses</h2>
          <a
            href="/address/add"
            class="btn-primary"
            style="width: auto; padding: 10px 16px"
          >
            Add New Address
          </a>
        </div>
      </div>

      <!-- ADDRESS LIST -->
      <% if(addressData && addressData.address.length > 0) { %> <%
      addressData.address.forEach((addr, index) => { %>
      <div class="profile-box">
        <h2><%= addr.addressType %></h2>

        <div class="info-grid">
          <div>
            <label>Name</label>
            <p><%= addr.name %></p>
          </div>

          <div>
            <label>House / Flat</label>
            <p><%= addr.houseName %></p>
          </div>

          <div>
            <label>Place</label>
            <p><%= addr.place %></p>
          </div>

          <div>
            <label>City</label>
            <p><%= addr.city %></p>
          </div>

          <div>
            <label>District</label>
            <p><%= addr.district %></p>
          </div>

          <div>
            <label>State</label>
            <p><%= addr.state %></p>
          </div>

          <div>
            <label>Pincode</label>
            <p><%= addr.pincode %></p>
          </div>

          <div>
            <label>Phone</label>
            <p><%= addr.phone %></p>
          </div>

          <div>
            <label>Alternate Phone</label>
            <p><%= addr.altPhone %></p>
          </div>
        </div>

        <div
          style="
            margin-top: 15px;
            display: flex;
            gap: 15px;
            align-items: center;
          "
        >
          <% if(!addr.isDefault){%>
          <a href="/address/default/<%= index %>">Set as Default</a>
          <% } else{%>

          <span style="color: green; font-weight: 500"> Default Address </span>
          <% } %>

          <a href="/address/edit/<%= index %>" style="margin-right: 15px"
            >Edit</a
          >
          <a
            href="javascript:void(0)"
            onclick="confirmDelete('/address/delete/<%= index %>')"
            style="color: red"
          >
            Delete
          </a>
        </div>
      </div>
      <% }) %> <% } else { %>
      <div class="profile-box">
        <p>No addresses found. Please add one.</p>
      </div>
      <% } %>
    </section>
  </div>
</section>

<%- include('../partials/user/footer.ejs') %>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/js/address.js"></script>