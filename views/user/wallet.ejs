<title>Home | User Profile</title>

<link
  href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap"
  rel="stylesheet"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" href="/css/wallet.css" />


<%- include('../partials/user/header.ejs') %>

<section class="profile-container">
  <div class="profile-grid">
    <!-- LEFT SIDEBAR -->
    <aside class="profile-sidebar">
      <div class="profile-card">
        <img
          src="/uploads/profile/<%= user.profileImage %>"
          alt="User"
          class="profile-avatar"
        />
        <h3><%= user.name%></h3>
        <p><%= user.email%></p>
      </div>

      <ul class="profile-menu">
        <li><a href="/user-profile">Profile</a></li>
        <li><a href="/cart">Cart</a></li>
        <li><a href="/orders">Orders</a></li>
        <li><a href="/address">Addresses</a></li>
        <li class="active"><a href="/wallet">Wallet</a></li>

        <li><a href="/edit-profile">Edit Profile</a></li>
        <li><a href="/change-password">Change Password</a></li>
        <li><a href="/change-email">Change Email</a></li>
        <li class="danger"><a href="/logout">Logout</a></li>
      </ul>
    </aside>



  <div class="profile-card">

    <h3>My Wallet</h3>

    <div class="wallet-balance">
      <h2>₹ <%= user.wallet.balance %></h2>
      <p>Available Balance</p>
    </div>

    <hr>

    <h4>Transaction History</h4>

    <% if(user.wallet.transactions.length === 0){ %>
      <p>No wallet transactions yet.</p>
    <% } else { %>
      <ul class="wallet-list">
        <% user.wallet.transactions.reverse().forEach(tx => { %>
          <li class="<%= tx.type === 'CREDIT' ? 'credit' : 'debit' %>">
            <span><%= tx.reason %></span>
            <strong>
              <%= tx.type === "CREDIT" ? "+" : "-" %>₹<%= tx.amount %>
            </strong>
            <small><%= tx.date.toDateString() %></small>
          </li>
        <% }) %>
      </ul>
    <% } %>

  </div>
</section>


<%- include('../partials/user/footer.ejs') %>
