<%- include("../../views/partials/admin/header") %>
<div class="main-layout" style="gap: 2%;">
        
    <aside class="sidebar">
        <nav class="sidebar-nav">
            <ul>
                <li class="<%= locals.page === 'dashboard' ? 'active' : '' %>">
                    <a href="/admin" style="color: inherit; text-decoration: none; display: flex; align-items: center; width: 100%; height: 100%;">
                        <i class="fas fa-tachometer-alt"></i>
                        Dashboard
                    </a>
                </li>
               
                
                <li class="<%= locals.page === 'users' ? 'active' : '' %>">
                    <a href="/admin/users" style="color: inherit; text-decoration: none; display: flex; align-items: center; width: 100%; height: 100%;">
                        <i class="fas fa-users"></i>
                        Users
                    </a>
                </li>
                
                <li class="<%= locals.page === 'category' ? 'active' : '' %>">
                    <a href="/admin/category" style="color: inherit; text-decoration: none; display: flex; align-items: center; width: 100%; height: 100%;">
                        <i class="fas fa-folder-open"></i>
                        Category
                    </a>
                </li>
                 
                <li class="<%= locals.page === 'products' ? 'active' : '' %>">
                        <a href="/admin/products" style="color: inherit; text-decoration: none; display: flex; align-items: center; width: 100%; height: 100%;">
                            <i class="fas fa-list"></i>
                            Products
                        </a>
                    </li>
                     <li >
                    <a href="/admin/orders"><i class="fas fa-box"></i>Orders</a>
                </li>
                <li >
                    <a href="/admin/sales-report"><i class="fas fa-chart-line"></i>Sales Report</a> 
                </li>
                 <li  >
                    <a href="/admin/stock"><i class="fa-solid fa-boxes-stacked"></i>Stock</a>
                </li>
                  <li class="active"  >
                    <a href="/admin/offers/product"><i class="fa-solid fa-tags"></i>Product Offer</a>
                </li>
                   <li  >
                    <a href="/admin/offers/category"><i class="fa-solid fa-tags"></i>Category Offer</a>
                </li>
                   <li >
          <a href="/admin/coupons"><i class="fa-solid fa-ticket"></i>Coupons</a>
        </li>
            </ul>
        </nav>
    </aside>


<main class="dashboard-content">

<div class="content-header d-flex justify-content-between mb-4">
  <h2>Product Offers</h2>
</div>

<div class="card p-3 mb-4">
  <form action="/admin/offers/product/add" method="POST" class="row g-2">
    <div class="col-md-6">
      <select name="productId" class="form-select" required>
        <% products.forEach(p => { %>
          <option value="<%= p._id.toString() %>"><%= p.productName %></option>
        <% }) %>
      </select>
    </div>
    <div class="col-md-3">
      <input type="number" name="discount" class="form-control" placeholder="Discount %" required>
    </div>
    <div class="col-md-3">
      <button class="btn btn-dark w-100">Add / Update</button>
    </div>
  </form>
</div>

<div class="table-container bg-white p-3 rounded shadow-sm">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Product</th>
        <th>Discount</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% offers.forEach(o => { %>
        <tr>
          <td><%= o.productId.productName %></td>
          <td><%= o.discount %>%</td>
          <td>
            <span class="badge <%= o.isActive ? 'bg-success' : 'bg-secondary' %>">
              <%= o.isActive ? 'Active' : 'Disabled' %>
            </span>
          </td>
          <td>
            <a href="/admin/offers/product/toggle/<%= o._id %>"
               class="btn btn-sm btn-outline-dark">
               Toggle
            </a>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>

</main>
</div>